# Поведенческие модели

## Диаграммы состояний

### Диаграмма состояний для алгоритма отрисовки уровня
![image](https://github.com/user-attachments/assets/c4b25a61-4f2d-4455-9aef-2686f4e195a0)

Алгоритм отрисовки уровня может находиться в 2-х состояниях: когда происходит отрисовка, и когда она не происходит:
* В "спящем режиме" алгоритм проверяет наличие .csv файлов уровня и переносит их содержимое в отдельную переменную
* После запуска, алгоритм создает по найденным .csv файлам уровень, обращаясь к классам спрайтов и функции масштабирования, а также перемещает созданную картинку справа налево, чтобы у пользователя создавалось впечатление движения его игрового персонажа

### Диаграмма состояний для алгоритма создания усложнений на уровнях
![image](https://github.com/user-attachments/assets/d2b301b7-8109-44dc-8c29-6c064d124bea)

Алгоритм создания усложнений также имеет 2 состояния:
* Ожидание столкновения. В этом состоянии алгоритм циклично проверяет не столкнулся ли персонаж с каким-либо усложнением, получая информацию из функциий move_map, которая перемещает уровень, и update, обновляющую информацию о местоположении игрока по отношению к объектам на карте
* Столкновение. В этом состоянии алгоритм получает информацию об усложнениии, с которым столкнулся персонаж, и обращается к той или иной функции для выполнения действия: прыжка(def jump и jumpMinus), смерти(def init) или удаления собранной монеты и передачи информации о столкновении с ней другому алгоритму(def draw_stats)

### Диаграмма состояний для алгоритма сбора статистики за игру
![image](https://github.com/user-attachments/assets/7a035c87-9b90-429d-90e8-9b1c016450a6)

Алгоритм сбора статистики состоит из 2 довольно обширных частей:
* Сбор, вывод и сохранение статистических данных. В этом состоянии алгоритм получает информацию о разных действиях персонажа(из def draw_stats в def init) с помощью функции draw_stats и сохраняет ее в разные переменные, для дальнейшего вывода: считает собранные монеты(itcoins и функция coin_count), в зависмости от положения игрока на уровне, создает панель прогресса прохождения(progress_color), а также считает количество смертей персонажа за уровень(tries)
* Вывод собранной информации на экраны. После смерти и прохождения уровня на экране появляются окна со статистикой: при поражении выводится экран с результатом прохождения уровня в %(def death_screen), а при победе на уровне выводится информация о количестве собранных монет(def won_screen)

## Диаграмма последовательности
![image](https://github.com/user-attachments/assets/5588f87f-e719-44b8-a3be-97ff35abdaa6)

* Пользователь запускает приложение и видит стартовое окно
* Приложение ожидает, пока пользователь не запустит саму игру
* После запуска, приложение обращается к алгоритмам и создает уровень, который сразу появляется на экране пользователя
* Начинается процесс игры, во время него собирается статистика, часть которой сразу отображается на экране, а часть сохраняется для дальнейшего использования
* При поражении или победе на экран выводятся окна, на них появляется оставшаяся статистика, собранная ранее
